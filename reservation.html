<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RÃ©servation - New Fiestas</title>

<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">

<!-- Ton CSS -->
<link rel="stylesheet" href="style.css">

</head>
<body>

<header>
    <h1>âœ¨ New Fiestas</h1>
    <nav>
        <a href="index.html">Accueil</a>
        <a href="galerie.html">Galerie</a>
        <a href="reservation.html">RÃ©server</a>
    </nav>
</header>

<main>

<section>
    <h2>ðŸ“… RÃ©server une date</h2>
    <div id="calendar"></div>
</section>

<section>
    <h2>Formulaire de rÃ©servation</h2>
    <form id="reservationForm">
        <input type="text" placeholder="Nom" required>
        <input type="email" placeholder="Email" required>
        <input type="date" id="dateInput" required>
        <input type="number" placeholder="Nombre de personnes" required>
        <button type="submit">RÃ©server</button>
    </form>
</section>

</main>

<footer>
    Â© 2026 New Fiestas
</footer>

<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<!-- SCRIPT PRINCIPAL -->
<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyBXunGz12bxeHIyIhsbQ12CGlVDP3E9ayc",
    authDomain: "newfestas-e6a0d.firebaseapp.com",
    projectId: "newfestas-e6a0d",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.addEventListener("DOMContentLoaded", async () => {

    const calendarEl = document.getElementById("calendar");

    // ðŸ”¥ RÃ©cupÃ©rer rÃ©servations
   import { addDoc, collection } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const form = document.querySelector("form");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const nom = form.querySelector('input[type="text"]').value;
  const email = form.querySelector('input[type="email"]').value;
  const date = form.querySelector('input[type="date"]').value;
  const personnes = form.querySelector('input[type="number"]').value;

  try {
    await addDoc(collection(db, "reservations"), {
      nom: nom,
      email: email,
      date: date,
      personnes: Number(personnes),
      statut: "confirmÃ©e",
      createdAt: new Date()
    });

    alert("RÃ©servation enregistrÃ©e !");
    form.reset();

  } catch (error) {
    console.error("Erreur :", error);
  }
});


</script>

</body>
</html>
